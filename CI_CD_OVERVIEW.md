# BankShield CI/CD æµæ°´çº¿æ¦‚è§ˆ

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

BankShieldé¡¹ç›®ç°å·²é›†æˆå®Œæ•´çš„CI/CDæµæ°´çº¿ï¼Œæ”¯æŒä»ä»£ç æäº¤åˆ°ç”Ÿäº§éƒ¨ç½²çš„å…¨è‡ªåŠ¨åŒ–æµç¨‹ã€‚è¯¥æµæ°´çº¿ç¡®ä¿äº†ä»£ç è´¨é‡ã€å®‰å…¨æ€§å’Œéƒ¨ç½²å¯é æ€§ã€‚

## ğŸš€ CI/CD æ¶æ„

```mermaid
graph TB
    subgraph "å¼€å‘é˜¶æ®µ"
        A[ä»£ç æäº¤] --> B[ä»£ç è´¨é‡æ£€æŸ¥]
        B --> C[å•å…ƒæµ‹è¯•]
        C --> D[é›†æˆæµ‹è¯•]
    end
    
    subgraph "æ„å»ºé˜¶æ®µ"
        D --> E[æ„å»ºDockeré•œåƒ]
        E --> F[å®‰å…¨æ‰«æ]
        F --> G[E2Eæµ‹è¯•]
        G --> H[æ€§èƒ½æµ‹è¯•]
    end
    
    subgraph "éƒ¨ç½²é˜¶æ®µ"
        H --> I{éƒ¨ç½²ç¯å¢ƒ}
        I -->|PR| J[é¢„è§ˆç¯å¢ƒ]
        I -->|Release| K[ç”Ÿäº§ç¯å¢ƒ]
    end
    
    subgraph "ç›‘æ§é˜¶æ®µ"
        J --> L[å¥åº·æ£€æŸ¥]
        K --> M[ç›‘æ§å‘Šè­¦]
    end
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
BankShield/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci-cd-pipeline.yml          # GitHub Actionsä¸»å·¥ä½œæµ
â”œâ”€â”€ argocd/
â”‚   â”œâ”€â”€ bankshield-prod.yaml            # ç”Ÿäº§ç¯å¢ƒArgoCDé…ç½®
â”‚   â”œâ”€â”€ bankshield-dev.yaml             # å¼€å‘ç¯å¢ƒArgoCDé…ç½®
â”‚   â””â”€â”€ argocd-image-updater-config.yaml # é•œåƒæ›´æ–°é…ç½®
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ deploy.sh                       # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ health-check.sh                 # å¥åº·æ£€æŸ¥è„šæœ¬
â”‚   â”œâ”€â”€ smoke-test.sh                   # å†’çƒŸæµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ security-scan.sh                # å®‰å…¨æ‰«æè„šæœ¬
â”‚   â””â”€â”€ send-deploy-notifications.sh    # éƒ¨ç½²é€šçŸ¥è„šæœ¬
â”œâ”€â”€ helm/
â”‚   â””â”€â”€ bankshield/
â”‚       â”œâ”€â”€ Chart.yaml                  # Helm Chartå®šä¹‰
â”‚       â””â”€â”€ values.yaml                 # é»˜è®¤é…ç½®å€¼
â”œâ”€â”€ k8s/
â”‚   â”œâ”€â”€ prod/                           # ç”Ÿäº§ç¯å¢ƒK8sé…ç½®
â”‚   â”‚   â”œâ”€â”€ bankshield-deployment.yaml
â”‚   â”‚   â”œâ”€â”€ bankshield-service.yaml
â”‚   â”‚   â””â”€â”€ bankshield-ingress.yaml
â”‚   â”œâ”€â”€ dev/                            # å¼€å‘ç¯å¢ƒK8sé…ç½®
â”‚   â””â”€â”€ preview/                        # é¢„è§ˆç¯å¢ƒK8sé…ç½®
â”œâ”€â”€ monitoring/
â”‚   â”œâ”€â”€ prometheus/                     # Prometheusé…ç½®
â”‚   â”œâ”€â”€ grafana/                        # Grafanaé…ç½®
â”‚   â””â”€â”€ alertmanager/                   # Alertmanageré…ç½®
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ k6/                             # æ€§èƒ½æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ cypress/                        # E2Eæµ‹è¯•è„šæœ¬
â”œâ”€â”€ bankshield-api/
â”‚   â””â”€â”€ Dockerfile                      # åç«¯APIå®¹å™¨é•œåƒ
â”œâ”€â”€ bankshield-ui/
â”‚   â”œâ”€â”€ Dockerfile                        # å‰ç«¯UIå®¹å™¨é•œåƒ
â”‚   â”œâ”€â”€ nginx.conf                        # Nginxé…ç½®
â”‚   â””â”€â”€ default.conf                      # é»˜è®¤ç«™ç‚¹é…ç½®
â”œâ”€â”€ Jenkinsfile                         # Jenkins Pipelineé…ç½®
â”œâ”€â”€ docs/CI_CD_SETUP.md                 # è¯¦ç»†è®¾ç½®æ–‡æ¡£
â””â”€â”€ CI_CD_OVERVIEW.md                   # æœ¬æ¦‚è§ˆæ–‡æ¡£
```

## ğŸ”§ å·¥å…·é“¾é›†æˆ

### CI/CDå¹³å°
- **GitHub Actions**: ä¸»CI/CDæµæ°´çº¿
- **Jenkins**: ä¼ä¸šçº§CI/CDå¤‡é€‰æ–¹æ¡ˆ
- **ArgoCD**: GitOpsæŒç»­éƒ¨ç½²

### å®¹å™¨åŒ–æŠ€æœ¯
- **Docker**: åº”ç”¨å®¹å™¨åŒ–
- **Kubernetes**: å®¹å™¨ç¼–æ’
- **Helm**: K8såŒ…ç®¡ç†

### ä»£ç è´¨é‡
- **SonarQube**: ä»£ç è´¨é‡åˆ†æ
- **ESLint**: å‰ç«¯ä»£ç è§„èŒƒ
- **Checkstyle**: åç«¯ä»£ç è§„èŒƒ

### æµ‹è¯•æ¡†æ¶
- **JUnit 5**: å•å…ƒæµ‹è¯•
- **Cypress**: E2Eæµ‹è¯•
- **k6**: æ€§èƒ½æµ‹è¯•
- **Postman/Newman**: APIæµ‹è¯•

### å®‰å…¨æ‰«æ
- **Trivy**: å®¹å™¨é•œåƒæ¼æ´æ‰«æ
- **OWASP Dependency Check**: ä¾èµ–å®‰å…¨æ£€æŸ¥
- **SonarQube**: å®‰å…¨ä»£ç è§„èŒƒæ£€æŸ¥

### ç›‘æ§å‘Šè­¦
- **Prometheus**: æŒ‡æ ‡æ”¶é›†
- **Grafana**: å¯è§†åŒ–ç›‘æ§
- **Alertmanager**: å‘Šè­¦ç®¡ç†
- **Slack**: é€šçŸ¥æ¸ é“

## ğŸ“Š æµæ°´çº¿é˜¶æ®µ

### 1. ä»£ç è´¨é‡æ£€æŸ¥
- âœ… SonarQubeä»£ç åˆ†æ
- âœ… ä»£ç è¦†ç›–ç‡æ£€æŸ¥
- âœ… å®‰å…¨ä»£ç è§„èŒƒéªŒè¯

### 2. æµ‹è¯•æ‰§è¡Œ
- âœ… å•å…ƒæµ‹è¯•ï¼ˆJava + å‰ç«¯ï¼‰
- âœ… é›†æˆæµ‹è¯•ï¼ˆå«æ•°æ®åº“ï¼‰
- âœ… E2Eæµ‹è¯•ï¼ˆCypressï¼‰
- âœ… æ€§èƒ½æµ‹è¯•ï¼ˆk6ï¼‰

### 3. æ„å»ºä¸æ‰«æ
- âœ… Dockeré•œåƒæ„å»º
- âœ… å®¹å™¨é•œåƒå®‰å…¨æ‰«æ
- âœ… ä¾èµ–æ¼æ´æ‰«æ

### 4. éƒ¨ç½²ç­–ç•¥
- âœ… é¢„è§ˆç¯å¢ƒè‡ªåŠ¨éƒ¨ç½²ï¼ˆPRè§¦å‘ï¼‰
- âœ… ç”Ÿäº§ç¯å¢ƒæ‰‹åŠ¨å®¡æ‰¹ï¼ˆReleaseè§¦å‘ï¼‰
- âœ… è“ç»¿éƒ¨ç½²æ”¯æŒ
- âœ… æ»šåŠ¨æ›´æ–°ç­–ç•¥

### 5. ç›‘æ§ä¸å‘Šè­¦
- âœ… åº”ç”¨æ€§èƒ½ç›‘æ§
- âœ… åŸºç¡€è®¾æ–½ç›‘æ§
- âœ… å®æ—¶å‘Šè­¦é€šçŸ¥
- âœ… è‡ªåŠ¨æ•…éšœæ¢å¤

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/bankshield/bankshield.git
cd bankshield

# å®‰è£…ä¾èµ–
mvn clean install
cd bankshield-ui && npm install
```

### 2. æœ¬åœ°å¼€å‘

```bash
# å¯åŠ¨åç«¯
mvn spring-boot:run -Dspring.profiles.active=dev

# å¯åŠ¨å‰ç«¯
cd bankshield-ui && npm run serve
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
mvn test

# é›†æˆæµ‹è¯•
mvn verify -Dspring.profiles.active=integration

# E2Eæµ‹è¯•
cd bankshield-ui && npm run test:e2e
```

### 4. æ„å»ºé•œåƒ

```bash
# æ„å»ºåç«¯é•œåƒ
docker build -t bankshield/api:latest ./bankshield-api

# æ„å»ºå‰ç«¯é•œåƒ
docker build -t bankshield/ui:latest ./bankshield-ui
```

### 5. éƒ¨ç½²åº”ç”¨

```bash
# ä¸€é”®éƒ¨ç½²åˆ°å¼€å‘ç¯å¢ƒ
./scripts/deploy.sh dev latest

# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
./scripts/deploy.sh prod v1.0.0
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### æ„å»ºæ€§èƒ½
- **æ„å»ºæ—¶é—´**: å¹³å‡5-8åˆ†é’Ÿ
- **æµ‹è¯•æ‰§è¡Œ**: å¹¶è¡Œæ‰§è¡Œï¼Œ3-5åˆ†é’Ÿ
- **é•œåƒæ„å»º**: åˆ†å±‚ç¼“å­˜ï¼Œ2-3åˆ†é’Ÿ

### éƒ¨ç½²æ€§èƒ½
- **é¢„è§ˆç¯å¢ƒ**: è‡ªåŠ¨éƒ¨ç½²ï¼Œ2-3åˆ†é’Ÿ
- **ç”Ÿäº§ç¯å¢ƒ**: å®¡æ‰¹æµç¨‹ï¼Œ5-10åˆ†é’Ÿ
- **å›æ»šæ—¶é—´**: å¿«é€Ÿå›æ»šï¼Œ1-2åˆ†é’Ÿ

### å¯é æ€§æŒ‡æ ‡
- **æˆåŠŸç‡**: >99.5%
- **MTTR**: <30åˆ†é’Ÿ
- **RPO**: <15åˆ†é’Ÿ

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### ä»£ç å®‰å…¨
- âœ… é™æ€ä»£ç åˆ†æ
- âœ… ä¾èµ–æ¼æ´æ‰«æ
- âœ… å®¹å™¨é•œåƒå®‰å…¨æ‰«æ
- âœ… å¯†é’¥ç®¡ç†

### éƒ¨ç½²å®‰å…¨
- âœ… RBACæƒé™æ§åˆ¶
- âœ… ç½‘ç»œç­–ç•¥éš”ç¦»
- âœ… Podå®‰å…¨ç­–ç•¥
- âœ… é•œåƒç­¾åéªŒè¯

### è¿è¡Œæ—¶å®‰å…¨
- âœ… å®‰å…¨ä¸Šä¸‹æ–‡
- âœ… åªè¯»æ ¹æ–‡ä»¶ç³»ç»Ÿ
- âœ… éç‰¹æƒç”¨æˆ·è¿è¡Œ
- âœ… èƒ½åŠ›é™åˆ¶

## ğŸ“‹ æœ€ä½³å®è·µ

### åˆ†æ”¯ç®¡ç†
- **main**: ç”Ÿäº§ç¯å¢ƒä»£ç 
- **develop**: å¼€å‘é›†æˆåˆ†æ”¯
- **feature/***: åŠŸèƒ½å¼€å‘åˆ†æ”¯
- **release/***: å‘å¸ƒå‡†å¤‡åˆ†æ”¯
- **hotfix/***: ç´§æ€¥ä¿®å¤åˆ†æ”¯

### æäº¤è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: é”™è¯¯ä¿®å¤
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·
```

### ç‰ˆæœ¬ç®¡ç†
- è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼ˆSemVerï¼‰
- è‡ªåŠ¨ç‰ˆæœ¬å·ç”Ÿæˆ
- å˜æ›´æ—¥å¿—ç»´æŠ¤
- å‘å¸ƒè¯´æ˜ç¼–å†™

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **æ„å»ºå¤±è´¥**
   ```bash
   # æŸ¥çœ‹æ„å»ºæ—¥å¿—
   gh run list
   gh run view <run-id> --log
   ```

2. **éƒ¨ç½²å¤±è´¥**
   ```bash
   # æ£€æŸ¥PodçŠ¶æ€
   kubectl get pods -n bankshield-prod
   kubectl describe pod <pod-name> -n bankshield-prod
   ```

3. **æœåŠ¡ä¸å¯ç”¨**
   ```bash
   # å¥åº·æ£€æŸ¥
   ./scripts/health-check.sh https://api.bankshield.com
   
   # æŸ¥çœ‹æœåŠ¡æ—¥å¿—
   kubectl logs -f deployment/bankshield-api -n bankshield-prod
   ```

### ç›‘æ§æ£€æŸ¥

```bash
# PrometheusæŸ¥è¯¢
curl -G http://prometheus:9090/api/v1/query --data-urlencode 'query=up{job="bankshield-api"}'

# Grafanaä»ªè¡¨æ¿
open http://grafana.bankshield.com/d/bankshield-overview
```

## ğŸ“ æ”¯æŒè”ç³»

### å›¢é˜ŸèŒè´£
- **å¼€å‘å›¢é˜Ÿ**: åŠŸèƒ½å¼€å‘å’Œä»£ç ç»´æŠ¤
- **è¿ç»´å›¢é˜Ÿ**: åŸºç¡€è®¾æ–½å’Œéƒ¨ç½²
- **å®‰å…¨å›¢é˜Ÿ**: å®‰å…¨æ‰«æå’Œåˆè§„
- **QAå›¢é˜Ÿ**: æµ‹è¯•ç­–ç•¥å’Œè´¨é‡ä¿è¯

### è”ç³»ä¿¡æ¯
- **æŠ€æœ¯æ”¯æŒ**: tech-support@bankshield.com
- **è¿ç»´å€¼ç­**: ops-oncall@bankshield.com
- **å®‰å…¨å“åº”**: security@bankshield.com

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [è¯¦ç»†è®¾ç½®æŒ‡å—](docs/CI_CD_SETUP.md)
- [é¡¹ç›®æ¶æ„è¯´æ˜](PROJECT_OVERVIEW.md)
- [å¼€å‘ç¯å¢ƒé…ç½®](DEVELOPMENT_SETUP.md)
- [å®‰å…¨æœ€ä½³å®è·µ](docs/SECURITY.md)
- [ç›‘æ§å‘Šè­¦é…ç½®](monitoring/README.md)

---

BankShield CI/CDæµæ°´çº¿ç°å·²å®Œå…¨é…ç½®ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²å’Œç›‘æ§ã€‚è¯¥æµæ°´çº¿ç¡®ä¿äº†é«˜è´¨é‡ã€é«˜å¯é æ€§çš„è½¯ä»¶äº¤ä»˜æµç¨‹ã€‚