# BankShield系统功能测试指南

## 🎯 测试环境准备

### 启动服务
```bash
# 启动后端（终端1）
cd /Users/zhangyanlong/workspaces/BankShield/bankshield-api
mvn spring-boot:run

# 启动前端（终端2）
cd /Users/zhangyanlong/workspaces/BankShield/bankshield-ui
npm run dev
```

### 访问地址
- **前台页面**：http://localhost:3000
- **登录账号**：admin / 123456

---

## 📋 功能测试清单

### 1. 登录功能
- [ ] 访问首页自动跳转到登录页
- [ ] 使用admin/123456登录成功
- [ ] 登录后跳转到Dashboard
- [ ] 左侧显示完整导航菜单
- [ ] 顶部显示用户名

### 2. 用户管理（/user）
- [ ] 进入用户管理页面
- [ ] 查看用户列表（应显示4个预置用户）
- [ ] 分页功能正常
- [ ] 搜索用户（按用户名）
- [ ] 添加新用户
- [ ] 编辑用户信息
- [ ] 删除用户
- [ ] 刷新页面保持列表状态

### 3. 角色管理（/system/role）【新功能】
- [ ] 从系统管理菜单进入角色管理
- [ ] 查看角色列表（应显示5个预置角色）
- [ ] 分页正常显示
- [ ] 搜索角色（按角色名称/编码）
- [ ] **新增角色**：
  - [ ] 点击"新增角色"
  - [ ] 填写角色名称和编码
  - [ ] 选择状态（启用）
  - [ ] 提交成功，列表中显示新角色
- [ ] **编辑角色**：
  - [ ] 点击操作列的"编辑"
  - [ ] 修改角色信息
  - [ ] 保存成功，列表更新
- [ ] **删除角色**：
  - [ ] 点击"删除"
  - [ ] 确认删除对话框
  - [ ] 删除成功，从列表中移除
- [ ] **状态切换**：
  - [ ] 使用"启用"按钮切换状态
  - [ ] 禁用后角色不可用于授权

### 4. 部门管理（/system/dept）【新功能】
- [ ] 从系统管理菜单进入部门管理
- [ ] **树形展示**：
  - [ ] 显示部门树结构
  - [ ] 总行下包含：信息技术部、财务管理部等
  - [ ] 信息技术部下包含：研发组、测试组
  - [ ] 支持折叠/展开节点
- [ ] **搜索功能**：
  - [ ] 输入部门名称搜索
  - [ ] 结果高亮显示
  - [ ] 清空搜索恢复完整树
- [ ] **添加部门**：
  - [ ] 点击"添加根部门"
  - [ ] 填写部门信息（名称、编码、描述、排序）
  - [ ] 提交成功，显示在树中
- [ ] **添加子部门**：
  - [ ] 悬停部门，点击右侧的"添加子部门"
  - [ ] 填报表单
  - [ ] 子部门显示在父部门下
- [ ] **编辑部门**：
  - [ ] 点击"编辑"
  - [ ] 修改信息
  - [ ] 保存更新
- [ ] **删除部门**：
  - [ ] 点击"删除"
  - [ ] 有子部门的部门不能删除
  - [ ] 删除成功从树中移除

### 5. 菜单管理（/system/menu）【新功能】
- [ ] 从系统管理菜单进入菜单管理
- [ ] **树形表格展示**：
  - [ ] 显示菜单树（包含目录、菜单、按钮）
  - [ ] 第一列显示菜单图标+名称
  - [ ] 显示路由路径、权限标识、状态
- [ ] **查询功能**：
  - [ ] 按菜单名称搜索
  - [ ] 即时过滤结果
- [ ] **添加菜单**：
  - [ ] 点击"添加根菜单"
  - [ ] 表单字段：
    - [ ] 菜单类型：目录/菜单/按钮
    - [ ] 菜单图标：点击选择（弹出图标选择器）
    - [ ] 菜单名称
    - [ ] 权限标识（如：system:user:add）
    - [ ] 路由路径（如：/system/user）
    - [ ] 组件路径（如：@/views/system/user）
    - [ ] 排序号
    - [ ] 状态
  - [ ] 提交成功，显示在树中
- [ ] **添加子菜单**：
  - [ ] 悬停菜单，点击"添加子菜单"
  - [ ] 子菜单自动关联父菜单
- [ ] **编辑菜单**：
  - [ ] 修改菜单信息
  - [ ] 图标选择器正常工作
- [ ] **删除菜单**：
  - [ ] 删除子菜单或根菜单
  - [ ] 删除后树结构更新

### 6. 数据分类分级模块（/classification/*）
- [ ] 资产管理页面展示
- [ ] 资产地图可视化
- [ ] 资产审核功能
- [ ] 数据源管理查询
- [ ] 血缘分析图表
- [ ] 敏感数据模板列表

### 7. Dashboard数据大屏（/dashboard）
- [ ] 显示统计信息卡片
- [ ] 图表正常渲染（ECharts）
- [ ] 实时数据刷新
- [ ] 系统状态监控

### 8. 三权分立管理（/system/role-mutex）
- [ ] 角色统计信息展示
- [ ] 手动检查功能
- [ ] 状态查询功能

---

## 🔐 权限测试

### 基于角色的菜单访问
- [ ] **管理员**（admin）
  - [ ] 可以看到所有菜单
  - [ ] 所有操作按钮可用
- [ ] **安全管理员**（security）
  - [ ] 登录后只显示授权菜单
- [ ] **审计管理员**（audit）
  - [ ] 登录后只显示授权菜单
- [ ] **普通用户**（user）
  - [ ] 登录后只显示基础菜单

---

## 🐛 常见问题排查

### 页面无法访问
1. 检查后端是否启动：查看端口8080
2. 检查前端是否启动：查看端口3000
3. 检查浏览器控制台报错

### 数据库相关问题
```bash
# 测试MySQL连接
mysql -u root -p3f342bb206 -e "USE bankshield; SELECT COUNT(*) FROM sys_user;"

# 检查表是否存在
mysql -u root -p3f342bb206 -e "SHOW TABLES;" | grep -E "sys_user|sys_role|sys_dept|sys_menu"
```

### Redis相关问题
```bash
# 测试Redis连接
redis-cli ping
redis-cli keys "*"
```

---

## 📈 测试数据建议

### 角色管理测试数据
```bash
# 添加测试角色
角色名称：测试管理员
角色编码：TEST_ADMIN
描述：用于测试的角色
状态：启用
```

### 部门管理测试数据
```bash
# 添加测试部门
部门名称：市场营销部
部门编码：MARKETING
父部门：总行
desc：负责市场营销相关工作
```

### 菜单管理测试数据
```bash
# 添加测试菜单
类型：菜单
名称：测试管理
路由：/test/manage
组件：@/views/test/manage
图标：Document
排序：10
状态：启用
```

---

## ✅ 通过标准

所有功能测试通过后，系统具备以下能力：
- [x] 完整的用户生命周期管理
- [x] 基于RBAC的角色权限管理
- [x] 树形部门结构管理
- [x] 动态菜单配置管理
- [x] 数据分类分级管理
- [x] 三权分立安全控制
- [x] 响应式UI设计
- [x] TypeScript类型安全

---

## 🎉 恭喜！

完成以上测试后，BankShield系统已具备**企业级数据安全管理平台**的核心功能！
