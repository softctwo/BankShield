# BankShield èœå•æƒé™åˆå§‹åŒ–æŠ¥å‘Š

## ğŸ“‹ åˆå§‹åŒ–æ¦‚è§ˆ

**åˆå§‹åŒ–æ—¶é—´**: 2025-01-04  
**åˆå§‹åŒ–çŠ¶æ€**: âœ… æˆåŠŸå®Œæˆ  
**æ•°æ®åº“**: bankshield  

---

## âœ… åˆå§‹åŒ–å†…å®¹

### 1. èœå•æ•°æ®åˆå§‹åŒ–

**æ€»è®¡**: 37ä¸ªèœå•é¡¹

| ç±»å‹ | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| ç›®å½• | 9 | ä¸€çº§èœå•ç›®å½• |
| èœå• | 23 | äºŒçº§åŠŸèƒ½èœå• |
| æŒ‰é’® | 5 | æŒ‰é’®çº§æƒé™ |

### 2. ä¸€çº§èœå•åˆ—è¡¨ï¼ˆ10ä¸ªï¼‰

| ID | èœå•åç§° | è·¯ç”± | å›¾æ ‡ | æ’åº | æƒé™æ ‡è¯† |
|----|---------|------|------|------|---------|
| 1 | é¦–é¡µ | /dashboard | dashboard | 1 | dashboard:view |
| 2 | æ•°æ®åŠ å¯† | /encryption | lock | 2 | - |
| 3 | è®¿é—®æ§åˆ¶ | /access-control | user | 3 | - |
| 4 | å®¡è®¡è¿½è¸ª | /audit | document | 4 | - |
| 5 | æ•°æ®è„±æ• | /desensitization | view | 5 | - |
| 6 | åˆè§„æ€§æ£€æŸ¥ | /compliance | document-checked | 6 | - |
| 7 | å®‰å…¨æ€åŠ¿ | /security | warning | 7 | - |
| 8 | æ•°æ®è¡€ç¼˜ | /lineage | share | 8 | - |
| 9 | å®‰å…¨æ‰«æ | /security-scan | search | 9 | - |
| 10 | ç³»ç»Ÿç®¡ç† | /system | setting | 10 | - |

### 3. äºŒçº§èœå•è¯¦æƒ…ï¼ˆ23ä¸ªï¼‰

#### æ•°æ®åŠ å¯†ï¼ˆ2ä¸ªï¼‰
- åŠ å¯†ç®¡ç† - `/encryption/manage` - `encryption:manage:view`
- å¯†é’¥ç®¡ç† - `/encryption/key` - `encryption:key:view`

#### è®¿é—®æ§åˆ¶ï¼ˆ3ä¸ªï¼‰
- ç”¨æˆ·ç®¡ç† - `/access-control/user` - `user:view`
- è§’è‰²ç®¡ç† - `/access-control/role` - `role:view`
- æƒé™ç®¡ç† - `/access-control/permission` - `permission:view`

#### å®¡è®¡è¿½è¸ªï¼ˆ2ä¸ªï¼‰
- å®¡è®¡æ—¥å¿— - `/audit/log` - `audit:log:view`
- å®¡è®¡åˆ†æ - `/audit/analysis` - `audit:analysis:view`

#### æ•°æ®è„±æ•ï¼ˆ2ä¸ªï¼‰
- è„±æ•è§„åˆ™ - `/desensitization/rule` - `desensitization:rule:view`
- è„±æ•æ—¥å¿— - `/desensitization/log` - `desensitization:log:view`

#### åˆè§„æ€§æ£€æŸ¥ï¼ˆ3ä¸ªï¼‰
- åˆè§„è§„åˆ™ - `/compliance/rule` - `compliance:rule:view`
- æ£€æŸ¥ä»»åŠ¡ - `/compliance/task` - `compliance:task:view`
- åˆè§„æŠ¥å‘Š - `/compliance/report` - `compliance:report:view`

#### å®‰å…¨æ€åŠ¿ï¼ˆ2ä¸ªï¼‰
- å®‰å…¨å¤§å± - `/security/dashboard` - `security:dashboard:view`
- å¨èƒç®¡ç† - `/security/threat` - `security:threat:view`

#### æ•°æ®è¡€ç¼˜ï¼ˆ2ä¸ªï¼‰
- è¡€ç¼˜è¿½è¸ª - `/lineage/track` - `lineage:track:view`
- å½±å“åˆ†æ - `/lineage/analysis` - `lineage:analysis:view`

#### å®‰å…¨æ‰«æï¼ˆ2ä¸ªï¼‰
- æ‰«æä»»åŠ¡ - `/security-scan/task` - `scan:task:view`
- æ¼æ´ç®¡ç† - `/security-scan/vulnerability` - `scan:vulnerability:view`

#### ç³»ç»Ÿç®¡ç†ï¼ˆ4ä¸ªï¼‰
- èœå•ç®¡ç† - `/system/menu` - `system:menu:view`
- å­—å…¸ç®¡ç† - `/system/dict` - `system:dict:view`
- ç³»ç»Ÿé…ç½® - `/system/config` - `system:config:view`
- æ—¥å¿—ç®¡ç† - `/system/log` - `system:log:view`

### 4. æŒ‰é’®æƒé™ï¼ˆ5ä¸ªï¼‰

ä»¥ç”¨æˆ·ç®¡ç†ä¸ºä¾‹ï¼š
- `user:query` - ç”¨æˆ·æŸ¥è¯¢
- `user:add` - ç”¨æˆ·æ–°å¢
- `user:edit` - ç”¨æˆ·ä¿®æ”¹
- `user:delete` - ç”¨æˆ·åˆ é™¤
- `user:export` - ç”¨æˆ·å¯¼å‡º

---

## ğŸ‘¥ è§’è‰²æƒé™é…ç½®

### 1. ç®¡ç†å‘˜è§’è‰²ï¼ˆroleId=1ï¼‰

**æƒé™èŒƒå›´**: å…¨éƒ¨åŠŸèƒ½  
**èœå•æ•°é‡**: 37ä¸ª  
**è¯´æ˜**: æ‹¥æœ‰ç³»ç»Ÿæ‰€æœ‰åŠŸèƒ½çš„è®¿é—®æƒé™

**å¯è®¿é—®çš„ä¸€çº§èœå•**:
- âœ… é¦–é¡µ
- âœ… æ•°æ®åŠ å¯†
- âœ… è®¿é—®æ§åˆ¶
- âœ… å®¡è®¡è¿½è¸ª
- âœ… æ•°æ®è„±æ•
- âœ… åˆè§„æ€§æ£€æŸ¥
- âœ… å®‰å…¨æ€åŠ¿
- âœ… æ•°æ®è¡€ç¼˜
- âœ… å®‰å…¨æ‰«æ
- âœ… ç³»ç»Ÿç®¡ç†

### 2. æ™®é€šç”¨æˆ·è§’è‰²ï¼ˆroleId=2ï¼‰

**æƒé™èŒƒå›´**: åŸºç¡€æŸ¥çœ‹åŠŸèƒ½  
**èœå•æ•°é‡**: 7ä¸ª  
**è¯´æ˜**: ä»…å¯è®¿é—®å®¡è®¡å’Œå®‰å…¨æ€åŠ¿ç›¸å…³åŠŸèƒ½

**å¯è®¿é—®çš„èœå•**:
- âœ… é¦–é¡µ
- âœ… å®¡è®¡è¿½è¸ª
  - å®¡è®¡æ—¥å¿—
  - å®¡è®¡åˆ†æ
- âœ… å®‰å…¨æ€åŠ¿
  - å®‰å…¨å¤§å±
  - å¨èƒç®¡ç†

---

## ğŸ”‘ ç”¨æˆ·è§’è‰²åˆ†é…

| ç”¨æˆ·ID | è§’è‰²ID | è§’è‰²åç§° | æƒé™è¯´æ˜ |
|--------|--------|---------|---------|
| 1 | 1 | ç®¡ç†å‘˜ | æ‹¥æœ‰æ‰€æœ‰åŠŸèƒ½æƒé™ |
| 2 | 2 | æ™®é€šç”¨æˆ· | ä»…æœ‰åŸºç¡€æŸ¥çœ‹æƒé™ |

---

## ğŸ“Š æ•°æ®ç»Ÿè®¡

### èœå•ç»Ÿè®¡
```
ç›®å½•: 9ä¸ª
èœå•: 23ä¸ª
æŒ‰é’®: 5ä¸ª
æ€»è®¡: 37ä¸ªèœå•é¡¹
```

### æƒé™åˆ†é…ç»Ÿè®¡
```
ç®¡ç†å‘˜è§’è‰²: 37ä¸ªèœå•æƒé™
æ™®é€šç”¨æˆ·è§’è‰²: 7ä¸ªèœå•æƒé™
```

### åŠŸèƒ½æ¨¡å—è¦†ç›–
```
âœ… æ•°æ®åŠ å¯†ç®¡ç†
âœ… è®¿é—®æ§åˆ¶ç®¡ç†
âœ… å®¡è®¡è¿½è¸ª
âœ… æ•°æ®è„±æ•ç®¡ç†
âœ… åˆè§„æ€§æ£€æŸ¥
âœ… å®‰å…¨æ€åŠ¿å¤§å±
âœ… æ•°æ®è¡€ç¼˜è¿½è¸ª
âœ… å®‰å…¨æ‰«æ
âœ… ç³»ç»Ÿç®¡ç†
```

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. å‰ç«¯è®¿é—®

ç®¡ç†å‘˜ç”¨æˆ·ç™»å½•åï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰èœå•ï¼š

```
é¦–é¡µ
â”œâ”€â”€ æ•°æ®åŠ å¯†
â”‚   â”œâ”€â”€ åŠ å¯†ç®¡ç†
â”‚   â””â”€â”€ å¯†é’¥ç®¡ç†
â”œâ”€â”€ è®¿é—®æ§åˆ¶
â”‚   â”œâ”€â”€ ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ è§’è‰²ç®¡ç†
â”‚   â””â”€â”€ æƒé™ç®¡ç†
â”œâ”€â”€ å®¡è®¡è¿½è¸ª
â”‚   â”œâ”€â”€ å®¡è®¡æ—¥å¿—
â”‚   â””â”€â”€ å®¡è®¡åˆ†æ
â”œâ”€â”€ æ•°æ®è„±æ•
â”‚   â”œâ”€â”€ è„±æ•è§„åˆ™
â”‚   â””â”€â”€ è„±æ•æ—¥å¿—
â”œâ”€â”€ åˆè§„æ€§æ£€æŸ¥
â”‚   â”œâ”€â”€ åˆè§„è§„åˆ™
â”‚   â”œâ”€â”€ æ£€æŸ¥ä»»åŠ¡
â”‚   â””â”€â”€ åˆè§„æŠ¥å‘Š
â”œâ”€â”€ å®‰å…¨æ€åŠ¿
â”‚   â”œâ”€â”€ å®‰å…¨å¤§å±
â”‚   â””â”€â”€ å¨èƒç®¡ç†
â”œâ”€â”€ æ•°æ®è¡€ç¼˜
â”‚   â”œâ”€â”€ è¡€ç¼˜è¿½è¸ª
â”‚   â””â”€â”€ å½±å“åˆ†æ
â”œâ”€â”€ å®‰å…¨æ‰«æ
â”‚   â”œâ”€â”€ æ‰«æä»»åŠ¡
â”‚   â””â”€â”€ æ¼æ´ç®¡ç†
â””â”€â”€ ç³»ç»Ÿç®¡ç†
    â”œâ”€â”€ èœå•ç®¡ç†
    â”œâ”€â”€ å­—å…¸ç®¡ç†
    â”œâ”€â”€ ç³»ç»Ÿé…ç½®
    â””â”€â”€ æ—¥å¿—ç®¡ç†
```

### 2. APIè°ƒç”¨

**è·å–ç”¨æˆ·èœå•**:
```bash
GET /api/system/menu/user/{userId}
```

**è·å–ç”¨æˆ·æƒé™**:
```bash
GET /api/system/menu/perms/{userId}
```

**è·å–è·¯ç”±ä¿¡æ¯**:
```bash
GET /api/system/menu/getRouters
```

### 3. æƒé™æ£€æŸ¥

**å‰ç«¯æƒé™æŒ‡ä»¤**:
```vue
<el-button v-permission="['user:add']">æ–°å¢ç”¨æˆ·</el-button>
```

**ä»£ç ä¸­æ£€æŸ¥æƒé™**:
```typescript
if (permissionStore.hasPermission('user:add')) {
  // æœ‰æƒé™
}
```

---

## ğŸ“ æ‰§è¡Œçš„SQLè„šæœ¬

### 1. èœå•æ•°æ®åˆå§‹åŒ–
```bash
mysql -u root -p bankshield < sql/init_menu_data.sql
```

**æ‰§è¡Œç»“æœ**: âœ… æˆåŠŸ  
**åˆå§‹åŒ–èœå•**: 37ä¸ª

### 2. ç”¨æˆ·è§’è‰²æƒé™åˆå§‹åŒ–
```bash
mysql -u root -p bankshield < sql/init_user_permissions.sql
```

**æ‰§è¡Œç»“æœ**: âœ… æˆåŠŸ  
**é…ç½®è§’è‰²**: 2ä¸ª  
**åˆ†é…ç”¨æˆ·**: 2ä¸ª

---

## âœ… éªŒè¯æ­¥éª¤

### 1. éªŒè¯èœå•æ•°æ®

```sql
-- æŸ¥è¯¢èœå•æ€»æ•°
SELECT COUNT(*) FROM sys_menu;
-- ç»“æœ: 37

-- æŸ¥è¯¢ä¸€çº§èœå•
SELECT * FROM sys_menu WHERE parent_id = 0 ORDER BY sort_order;
-- ç»“æœ: 10æ¡è®°å½•
```

### 2. éªŒè¯è§’è‰²æƒé™

```sql
-- æŸ¥è¯¢ç®¡ç†å‘˜æƒé™
SELECT COUNT(*) FROM sys_role_menu WHERE role_id = 1;
-- ç»“æœ: 37

-- æŸ¥è¯¢æ™®é€šç”¨æˆ·æƒé™
SELECT COUNT(*) FROM sys_role_menu WHERE role_id = 2;
-- ç»“æœ: 7
```

### 3. éªŒè¯ç”¨æˆ·è§’è‰²

```sql
-- æŸ¥è¯¢ç”¨æˆ·è§’è‰²åˆ†é…
SELECT * FROM sys_user_role;
-- ç»“æœ: 2æ¡è®°å½•
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œ

### 1. é‡å¯åç«¯æœåŠ¡

```bash
cd bankshield-api
mvn spring-boot:run
```

### 2. å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
cd bankshield-ui
npm run dev
```

### 3. æµ‹è¯•ç™»å½•

**ç®¡ç†å‘˜è´¦å·**:
- ç”¨æˆ·ID: 1
- å¯è§èœå•: å…¨éƒ¨10ä¸ªä¸€çº§èœå•

**æ™®é€šç”¨æˆ·è´¦å·**:
- ç”¨æˆ·ID: 2
- å¯è§èœå•: é¦–é¡µã€å®¡è®¡è¿½è¸ªã€å®‰å…¨æ€åŠ¿

### 4. éªŒè¯åŠŸèƒ½

1. ç™»å½•ç³»ç»Ÿ
2. æŸ¥çœ‹ä¾§è¾¹æ èœå•æ˜¯å¦æ­£ç¡®æ˜¾ç¤º
3. ç‚¹å‡»å„ä¸ªèœå•ï¼ŒéªŒè¯é¡µé¢æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®
4. æµ‹è¯•æŒ‰é’®æƒé™æ˜¯å¦ç”Ÿæ•ˆ

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®åº“è¿æ¥

ç¡®ä¿MySQLæœåŠ¡å·²å¯åŠ¨ï¼š
```bash
brew services start mysql
```

### 2. è¡¨ç»“æ„è¯´æ˜

ç³»ç»Ÿä½¿ç”¨çš„è¡¨ç»“æ„ï¼š
- `sys_menu` - èœå•è¡¨ï¼ˆå·²å­˜åœ¨ï¼‰
- `sys_role_menu` - è§’è‰²èœå•å…³è”è¡¨ï¼ˆå·²åˆ›å»ºï¼‰
- `sys_user_role` - ç”¨æˆ·è§’è‰²å…³è”è¡¨ï¼ˆå·²åˆ›å»ºï¼‰

### 3. èœå•ç±»å‹

- `menu_type = 0` - ç›®å½•ï¼ˆä¸€çº§èœå•ï¼‰
- `menu_type = 1` - èœå•ï¼ˆäºŒçº§èœå•ï¼‰
- `menu_type = 2` - æŒ‰é’®ï¼ˆæŒ‰é’®æƒé™ï¼‰

### 4. çŠ¶æ€è¯´æ˜

- `status = 0` - ç¦ç”¨
- `status = 1` - å¯ç”¨

---

## ğŸ‰ åˆå§‹åŒ–å®Œæˆ

**ç³»ç»Ÿèœå•å’Œæƒé™å·²å…¨éƒ¨åˆå§‹åŒ–å®Œæˆï¼**

ç°åœ¨ä½ å¯ä»¥ï¼š
- âœ… æŸ¥çœ‹æ‰€æœ‰24ä¸ªåŠŸèƒ½æ¨¡å—çš„èœå•
- âœ… ä½¿ç”¨ç®¡ç†å‘˜è´¦å·è®¿é—®æ‰€æœ‰åŠŸèƒ½
- âœ… ä½¿ç”¨æ™®é€šç”¨æˆ·è´¦å·è®¿é—®åŸºç¡€åŠŸèƒ½
- âœ… é€šè¿‡æƒé™æ§åˆ¶æŒ‰é’®çš„æ˜¾ç¤ºå’Œéšè—
- âœ… åŠ¨æ€åŠ è½½ç”¨æˆ·å¯è®¿é—®çš„è·¯ç”±

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
- èœå•æƒé™ä½¿ç”¨æŒ‡å—: `docs/MENU_PERMISSION_GUIDE.md`
- è¿ç»´æ‰‹å†Œ: `docs/OPERATIONS_MANUAL.md`
- æœ€ä½³å®è·µ: `docs/BEST_PRACTICES.md`

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**ç”Ÿæˆæ—¶é—´**: 2025-01-04  
**ç»´æŠ¤è€…**: BankShieldå¼€å‘å›¢é˜Ÿ
