# BankShield 软件需求规格说明书
## Software Requirements Specification (SRS)

**文档版本**: v1.0  
**项目名称**: BankShield - 银行数据安全管理系统  
**编写日期**: 2026-01-06  
**编写人**: BankShield Development Team  
**审核人**: Technical Lead  
**批准人**: Project Manager  

---

## 文档修订历史

| 版本 | 日期 | 修订人 | 修订内容 | 审核人 |
|------|------|--------|---------|--------|
| v1.0 | 2026-01-06 | Dev Team | 初始版本 | Tech Lead |

---

## 目录

1. [引言](#1-引言)
2. [项目概述](#2-项目概述)
3. [功能需求](#3-功能需求)
4. [非功能需求](#4-非功能需求)
5. [系统约束](#5-系统约束)
6. [接口需求](#6-接口需求)
7. [数据需求](#7-数据需求)
8. [质量属性](#8-质量属性)

---

## 1. 引言

### 1.1 编写目的

本文档详细描述BankShield银行数据安全管理系统的软件需求，为系统设计、开发、测试和验收提供依据。

**目标读者**:
- 项目经理
- 系统架构师
- 开发工程师
- 测试工程师
- 产品经理
- 客户代表

### 1.2 项目背景

**项目名称**: BankShield - 银行数据安全管理系统

**项目目标**: 构建一个专业的银行数据安全管理平台，提供数据加密、访问控制、审计追踪、敏感数据识别与脱敏等核心功能，确保银行数据全生命周期的安全性，满足金融行业监管要求。

**业务需求**:
- 保护银行客户敏感数据
- 满足金融监管合规要求
- 防止数据泄露和滥用
- 提供完整的审计追踪
- 支持多方安全数据协作

### 1.3 术语定义

| 术语 | 定义 |
|------|------|
| **RBAC** | Role-Based Access Control，基于角色的访问控制 |
| **SM2/SM3/SM4** | 中国国家密码管理局发布的国密算法 |
| **脱敏** | 数据脱敏，对敏感数据进行变形处理 |
| **数据血缘** | 数据的来源、流转和使用轨迹 |
| **区块链存证** | 使用区块链技术存储不可篡改的证据 |
| **MPC** | Multi-Party Computation，多方安全计算 |
| **PSI** | Private Set Intersection，私有集合交集 |

### 1.4 参考资料

- GB/T 35273-2020《信息安全技术 个人信息安全规范》
- GB/T 22239-2019《信息安全技术 网络安全等级保护基本要求》
- 《商业银行数据治理指引》（银保监发〔2018〕22号）
- ISO/IEC 27001:2013 信息安全管理体系
- GDPR 欧盟通用数据保护条例

---

## 2. 项目概述

### 2.1 产品描述

BankShield是一个企业级的银行数据安全管理平台，采用微服务架构，提供以下核心能力：

1. **数据加密管理** - 国密算法和国际标准加密
2. **访问控制** - 细粒度的权限管理
3. **审计追踪** - 全链路操作日志记录
4. **数据分类** - 自动识别和分类敏感数据
5. **数据脱敏** - 多种脱敏策略
6. **合规管理** - 自动化合规检查
7. **数据血缘** - 完整的数据流向追踪
8. **安全扫描** - 自动化漏洞检测
9. **区块链存证** - 审计日志不可篡改存储
10. **多方计算** - 隐私保护下的数据协作

### 2.2 用户特征

#### 2.2.1 主要用户角色

| 角色 | 职责 | 技术水平 | 使用频率 |
|------|------|---------|---------|
| **超级管理员** | 系统全局配置和管理 | 高 | 低 |
| **安全管理员** | 安全策略配置和监控 | 高 | 高 |
| **审计管理员** | 审计日志查看和分析 | 中 | 中 |
| **数据管理员** | 数据分类和脱敏配置 | 中 | 高 |
| **合规专员** | 合规检查和报告 | 中 | 中 |
| **业务用户** | 日常数据访问 | 低 | 高 |

#### 2.2.2 用户数量预估

- 并发用户数: 100-500
- 日活跃用户: 500-2000
- 总用户数: 5000-10000

### 2.3 运行环境

#### 2.3.1 硬件环境

**开发环境**:
- CPU: 4核心以上
- 内存: 8GB以上
- 磁盘: 100GB以上

**生产环境**:
- 应用服务器: 8核心/16GB内存/500GB SSD
- 数据库服务器: 16核心/32GB内存/1TB SSD
- 缓存服务器: 8核心/16GB内存/200GB SSD

#### 2.3.2 软件环境

| 组件 | 版本要求 | 说明 |
|------|---------|------|
| **操作系统** | Linux/Windows/macOS | 推荐CentOS 7+/Ubuntu 20.04+ |
| **JDK** | 17+ | OpenJDK或Oracle JDK |
| **Node.js** | 16+ | 前端运行环境 |
| **MySQL** | 8.0+ | 主数据库 |
| **Redis** | 6.0+ | 缓存和会话存储 |
| **Docker** | 20.10+ | 容器化部署（可选） |
| **Kubernetes** | 1.20+ | 容器编排（可选） |

### 2.4 假设与依赖

**假设**:
- 用户具备基本的计算机操作能力
- 网络环境稳定可靠
- 数据库服务器性能充足
- 有专业的运维团队支持

**依赖**:
- MySQL数据库服务
- Redis缓存服务
- 稳定的网络连接
- HTTPS证书（生产环境）

---

## 3. 功能需求

### 3.1 用户管理模块 (F-UM)

#### F-UM-001 用户注册
**优先级**: P0  
**描述**: 系统管理员可以创建新用户账号

**输入**:
- 用户名（必填，唯一）
- 密码（必填，符合强度要求）
- 姓名（必填）
- 邮箱（必填，唯一）
- 手机号（必填）
- 所属部门（必填）
- 角色（必填）

**处理**:
1. 验证输入数据合法性
2. 检查用户名和邮箱唯一性
3. 密码加密存储（BCrypt）
4. 生成用户ID
5. 记录创建日志

**输出**:
- 成功：返回用户信息
- 失败：返回错误信息

**验收标准**:
- 用户名必须唯一
- 密码强度至少包含大小写字母、数字、特殊字符
- 邮箱格式正确
- 创建成功后可以登录

#### F-UM-002 用户登录
**优先级**: P0  
**描述**: 用户通过用户名和密码登录系统

**输入**:
- 用户名或邮箱
- 密码
- 验证码（可选）

**处理**:
1. 验证用户名/邮箱存在性
2. 验证密码正确性
3. 检查账号状态（是否禁用）
4. 生成JWT Token
5. 记录登录日志
6. 更新最后登录时间

**输出**:
- 成功：返回Token和用户信息
- 失败：返回错误信息

**验收标准**:
- 密码错误5次后锁定账号30分钟
- Token有效期2小时
- 支持记住登录状态

#### F-UM-003 用户权限管理
**优先级**: P0  
**描述**: 为用户分配角色和权限

**功能点**:
- 角色分配
- 权限查看
- 角色互斥检查
- 权限继承

### 3.2 数据加密模块 (F-DE)

#### F-DE-001 密钥管理
**优先级**: P0  
**描述**: 管理加密密钥的生成、存储、轮换和销毁

**功能点**:
- 密钥生成（SM2/SM4/AES/RSA）
- 密钥存储（Vault集成）
- 密钥轮换（定期或手动）
- 密钥备份和恢复
- 密钥销毁

**验收标准**:
- 支持国密SM2/SM4算法
- 密钥存储加密
- 密钥轮换不影响业务
- 密钥操作全程审计

#### F-DE-002 数据加密
**优先级**: P0  
**描述**: 对敏感数据进行加密存储

**支持算法**:
- 对称加密：SM4、AES-256
- 非对称加密：SM2、RSA-2048
- 哈希算法：SM3、SHA-256

**加密模式**:
- 透明加密：应用层自动加解密
- 字段加密：指定字段加密
- 文件加密：文件级别加密

#### F-DE-003 数据解密
**优先级**: P0  
**描述**: 授权用户可以解密查看数据

**权限控制**:
- 基于角色的解密权限
- 解密操作审计
- 解密次数限制

### 3.3 访问控制模块 (F-AC)

#### F-AC-001 RBAC权限控制
**优先级**: P0  
**描述**: 基于角色的访问控制

**功能点**:
- 角色定义
- 权限分配
- 角色继承
- 角色互斥
- 动态权限检查

#### F-AC-002 IP白名单
**优先级**: P1  
**描述**: 限制特定IP访问系统

**功能点**:
- IP地址添加/删除
- IP段支持
- 黑白名单模式
- 访问日志记录

#### F-AC-003 多因素认证(MFA)
**优先级**: P1  
**描述**: 增强账号安全性

**支持方式**:
- 短信验证码
- 邮箱验证码
- Google Authenticator
- 硬件Token

### 3.4 审计日志模块 (F-AL)

#### F-AL-001 操作日志记录
**优先级**: P0  
**描述**: 记录所有用户操作

**记录内容**:
- 操作时间
- 操作用户
- 操作类型
- 操作对象
- 操作结果
- IP地址
- 请求参数

#### F-AL-002 日志查询
**优先级**: P0  
**描述**: 支持多维度日志查询

**查询条件**:
- 时间范围
- 用户
- 操作类型
- 操作结果
- IP地址

#### F-AL-003 区块链存证
**优先级**: P1  
**描述**: 关键审计日志上链存储

**功能点**:
- 自动上链
- 存证验证
- 区块链浏览器
- 完整性校验

### 3.5 数据分类模块 (F-DC)

#### F-DC-001 敏感数据识别
**优先级**: P0  
**描述**: 自动识别敏感数据

**识别类型**:
- 身份证号
- 银行卡号
- 手机号
- 邮箱
- 地址
- 自定义规则

#### F-DC-002 数据分级
**优先级**: P0  
**描述**: 对数据进行安全级别分类

**级别定义**:
- L1 公开数据
- L2 内部数据
- L3 敏感数据
- L4 机密数据

### 3.6 数据脱敏模块 (F-DM)

#### F-DM-001 脱敏规则配置
**优先级**: P0  
**描述**: 配置数据脱敏规则

**脱敏策略**:
- 遮蔽：部分字符替换为*
- 替换：随机值替换
- 加密：可逆加密
- 哈希：不可逆哈希
- 格式保留：保持数据格式

#### F-DM-002 动态脱敏
**优先级**: P0  
**描述**: 查询时实时脱敏

**功能点**:
- 基于角色的脱敏策略
- 字段级脱敏
- 自动脱敏
- 脱敏日志记录

#### F-DM-003 静态脱敏
**优先级**: P1  
**描述**: 批量数据脱敏

**应用场景**:
- 测试数据生成
- 数据导出
- 数据共享

### 3.7 合规管理模块 (F-CM)

#### F-CM-001 合规检查
**优先级**: P0  
**描述**: 自动化合规检查

**检查项**:
- 密码强度
- 权限分离
- 数据加密
- 审计日志完整性
- 访问控制有效性

#### F-CM-002 合规报告
**优先级**: P0  
**描述**: 生成合规报告

**报告类型**:
- 日报
- 周报
- 月报
- 年报
- 专项报告

### 3.8 数据血缘模块 (F-DL)

#### F-DL-001 血缘图谱
**优先级**: P1  
**描述**: 可视化展示数据血缘关系

**功能点**:
- 数据流向图
- 上下游追踪
- 影响分析
- 路径查询

#### F-DL-002 自动发现
**优先级**: P1  
**描述**: 自动发现数据血缘关系

**发现方式**:
- SQL解析
- 日志分析
- API调用追踪

### 3.9 安全扫描模块 (F-SS)

#### F-SS-001 漏洞扫描
**优先级**: P1  
**描述**: 自动扫描系统漏洞

**扫描类型**:
- SQL注入
- XSS攻击
- CSRF攻击
- 弱密码
- 配置错误

#### F-SS-002 安全评分
**优先级**: P1  
**描述**: 对系统安全性评分

**评分维度**:
- 漏洞数量和严重程度
- 合规性
- 配置安全性
- 访问控制有效性

### 3.10 多方计算模块 (F-MPC)

#### F-MPC-001 私有集合交集(PSI)
**优先级**: P2  
**描述**: 在不泄露各方数据的情况下计算交集

**应用场景**:
- 联合风控
- 客户匹配
- 数据去重

#### F-MPC-002 安全聚合
**优先级**: P2  
**描述**: 多方数据安全求和

**应用场景**:
- 联合统计
- 风险评估
- 数据分析

---

## 4. 非功能需求

### 4.1 性能需求 (NFR-P)

#### NFR-P-001 响应时间
- 页面加载时间 < 2秒
- API响应时间 < 500ms（90%）
- 数据库查询时间 < 100ms（简单查询）
- 加密/解密操作 < 100ms

#### NFR-P-002 吞吐量
- 支持500并发用户
- API吞吐量 > 1000 TPS
- 数据库吞吐量 > 5000 QPS

#### NFR-P-003 资源使用
- CPU使用率 < 70%（正常负载）
- 内存使用率 < 80%
- 磁盘I/O < 80%

### 4.2 可靠性需求 (NFR-R)

#### NFR-R-001 可用性
- 系统可用性 ≥ 99.9%（年停机时间 < 8.76小时）
- 数据库可用性 ≥ 99.99%

#### NFR-R-002 故障恢复
- 故障检测时间 < 1分钟
- 自动故障转移时间 < 5分钟
- 数据恢复时间 < 30分钟（RPO < 5分钟）

#### NFR-R-003 数据完整性
- 数据一致性保证
- 事务ACID特性
- 数据备份（每日全量+实时增量）

### 4.3 安全性需求 (NFR-S)

#### NFR-S-001 身份认证
- 强密码策略（8位以上，包含大小写字母、数字、特殊字符）
- 密码加密存储（BCrypt）
- 登录失败锁定（5次失败锁定30分钟）
- 支持MFA多因素认证

#### NFR-S-002 数据加密
- 传输加密：TLS 1.2+
- 存储加密：AES-256或SM4
- 密钥管理：Vault集成
- 国密算法支持

#### NFR-S-003 访问控制
- 基于RBAC的权限控制
- 最小权限原则
- 角色互斥
- 权限审计

#### NFR-S-004 审计日志
- 所有操作可审计
- 日志不可篡改（区块链存证）
- 日志保留期 ≥ 6个月
- 关键操作实时告警

### 4.4 可维护性需求 (NFR-M)

#### NFR-M-001 代码质量
- 代码覆盖率 ≥ 80%
- 代码规范遵循阿里巴巴Java开发手册
- SonarQube评分 ≥ A级
- 无严重漏洞（CVE评分 > 7）

#### NFR-M-002 文档完整性
- API文档（Swagger）
- 数据库设计文档
- 部署文档
- 用户手册
- 开发手册

#### NFR-M-003 可监控性
- 系统监控（Prometheus + Grafana）
- 日志聚合（ELK）
- 告警机制（Alertmanager）
- 性能分析（APM）

### 4.5 可扩展性需求 (NFR-E)

#### NFR-E-001 水平扩展
- 支持应用服务器水平扩展
- 支持数据库读写分离
- 支持缓存集群

#### NFR-E-002 模块化设计
- 微服务架构
- 服务解耦
- API版本管理

### 4.6 兼容性需求 (NFR-C)

#### NFR-C-001 浏览器兼容
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

#### NFR-C-002 操作系统兼容
- Windows 10+
- macOS 11+
- Linux（CentOS 7+/Ubuntu 20.04+）

#### NFR-C-003 数据库兼容
- MySQL 8.0+
- PostgreSQL 12+（可选）

### 4.7 易用性需求 (NFR-U)

#### NFR-U-001 用户界面
- 响应式设计
- 符合Material Design规范
- 支持中英文切换
- 支持主题切换

#### NFR-U-002 操作便捷性
- 常用操作 ≤ 3次点击
- 提供快捷键
- 批量操作支持
- 操作撤销/重做

#### NFR-U-003 帮助系统
- 在线帮助文档
- 操作提示
- 错误信息友好
- 视频教程

---

## 5. 系统约束

### 5.1 技术约束

- 后端必须使用Java 17+
- 前端必须使用Vue 3+
- 数据库必须使用MySQL 8.0+
- 必须支持国密算法（SM2/SM3/SM4）
- 必须使用HTTPS协议

### 5.2 业务约束

- 符合《商业银行数据治理指引》
- 符合GB/T 35273-2020个人信息安全规范
- 符合等保2.0三级要求
- 审计日志保留期不少于6个月

### 5.3 开发约束

- 代码必须通过SonarQube扫描
- 单元测试覆盖率 ≥ 80%
- 所有API必须有Swagger文档
- 遵循Git Flow工作流

---

## 6. 接口需求

### 6.1 用户接口

- Web界面（主要）
- RESTful API
- WebSocket（实时通知）

### 6.2 硬件接口

- 无特殊硬件接口要求

### 6.3 软件接口

| 接口类型 | 接口名称 | 协议 | 用途 |
|---------|---------|------|------|
| 数据库 | MySQL | JDBC | 数据持久化 |
| 缓存 | Redis | Redis Protocol | 缓存和会话 |
| 消息队列 | RabbitMQ | AMQP | 异步消息 |
| 区块链 | Hyperledger Fabric | gRPC | 审计存证 |
| 密钥管理 | HashiCorp Vault | HTTP/HTTPS | 密钥存储 |

### 6.4 通信接口

- HTTP/HTTPS（RESTful API）
- WebSocket（实时通信）
- gRPC（微服务间通信）

---

## 7. 数据需求

### 7.1 数据实体

主要数据实体包括：
- 用户（User）
- 角色（Role）
- 权限（Permission）
- 部门（Department）
- 菜单（Menu）
- 审计日志（AuditLog）
- 加密密钥（EncryptionKey）
- 脱敏规则（DesensitizationRule）
- 合规报告（ComplianceReport）
- 安全扫描任务（SecurityScanTask）

### 7.2 数据量估算

| 数据类型 | 日增量 | 月增量 | 年增量 | 保留期 |
|---------|--------|--------|--------|--------|
| 用户数据 | 10 | 300 | 3,600 | 永久 |
| 审计日志 | 10万 | 300万 | 3600万 | 6个月 |
| 加密密钥 | 5 | 150 | 1,800 | 永久 |
| 脱敏规则 | 2 | 60 | 720 | 永久 |
| 合规报告 | 30 | 900 | 10,800 | 3年 |

### 7.3 数据备份

- 全量备份：每日凌晨2:00
- 增量备份：每小时
- 备份保留期：30天
- 异地备份：每周

---

## 8. 质量属性

### 8.1 可测试性

- 单元测试覆盖率 ≥ 80%
- 集成测试覆盖核心流程
- 自动化测试占比 ≥ 70%

### 8.2 可移植性

- 支持Docker容器化部署
- 支持Kubernetes编排
- 支持多云部署

### 8.3 可重用性

- 公共组件模块化
- 工具类封装
- 配置外部化

---

## 附录

### A. 需求优先级定义

| 优先级 | 说明 | 实现时间 |
|--------|------|---------|
| P0 | 核心功能，必须实现 | 第一阶段 |
| P1 | 重要功能，应该实现 | 第二阶段 |
| P2 | 增强功能，可以实现 | 第三阶段 |
| P3 | 可选功能，未来实现 | 待定 |

### B. 需求追踪矩阵

详见《需求追踪矩阵.xlsx》

### C. 变更记录

所有需求变更必须经过评审和批准，记录在《需求变更记录表.xlsx》中。

---

**文档结束**

**批准签字**:

项目经理: ________________  日期: ________

技术负责人: ______________  日期: ________

质量负责人: ______________  日期: ________
